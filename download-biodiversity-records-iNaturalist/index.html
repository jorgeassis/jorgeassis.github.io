<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<meta name="google-site-verification" content="bk_G_7OoYI8N9v856DPvFsz4-FtC0ahvjuZJXRyYHnU" />

		<!-- SEO -->

		
			<title>Biodiversity Data Science | Downloading biodiversity records from iNaturalist</title>
			<meta property="og:title" content="Biodiversity Data Science | Downloading biodiversity records from iNaturalist" />
			<meta property="og:site_name" content="Biodiversity Data Science | Downloading biodiversity records from iNaturalist" />
			<meta property="twitter:title" content="Biodiversity Data Science | Downloading biodiversity records from iNaturalist" />

		

		

			<meta name="description" content="Automatically download biodiversity records from iNaturalist, the most recognised citizen science initiative.">
			<meta property="og:description" content="Automatically download biodiversity records from iNaturalist, the most recognised citizen science initiative." />
			<meta name="twitter:card" content="Automatically download biodiversity records from iNaturalist, the most recognised citizen science initiative." />

		

		<meta name="keywords" content="Biodiversity Data Science, Conservation Data Analysis, UN 2030 Sustainable Development, Marine Biodiversity Conservation, Environmental Data Science">
		<meta name="author" content="Jorge Assis">

		<meta name="generator" content="Jekyll v4.3.3" />
		<meta property="og:locale" content="en_US" />

		<meta property="og:type" content="https://www.biodiversitydatascience.com" />

		<!-- End SEO -->

		<!-- Favicon -->
    	<link href="/assets/images/bears.png" rel="shortcut icon">

		<!-- CSS -->
		<link href="/assets/plugins/bootstrap/bootstrap.min.css" rel="stylesheet">
		<link href="/assets/plugins/magnific-popup/magnific-popup.min.css" rel="stylesheet">
		<link href="/assets/plugins/owl-carousel/owl.carousel.min.css" rel="stylesheet">
		<link href="/assets/plugins/owl-carousel/owl.theme.default.min.css" rel="stylesheet">
		<link href="/assets/plugins/justified-gallery/justified-gallery.min.css" rel="stylesheet">
		<link href="/assets/plugins/sal/sal.min.css" rel="stylesheet">
		<link href="/assets/css/main.css" rel="stylesheet">

		<!-- Fonts/Icons -->
		<link href="/assets/plugins/font-awesome/css/all.css" rel="stylesheet">
		<link href="/assets/plugins/themify/themify-icons.min.css" rel="stylesheet">
		<link href="/assets/plugins/simple-line-icons/css/simple-line-icons.css" rel="stylesheet">


</head>


	<body data-preloader="4">
		<div class="wrapper">

			<!-- Header // sticky -->

			

			<div class="header">

				<div class="container margin-top-10">

					<div class="logo">
						<h4><a href="/">biodiversityDS</a><span style="color: #A22A2A">.</span></h4>
					</div>

					<div class="header-menu-wrapper">
						<ul class="header-menu">
							<li class="m-item">
								<a class="m-link" href="/about/">About</a>
							</li>
							<li class="m-item">
								<a class="m-link" href="/projects/">Projects</a>
							</li>

							<li class="m-item">
								<a class="m-link" href="/publications/">Publications</a>
							</li>

							<li class="m-item">
								<a class="m-link" href="/podcast/" >Podcast</a>
							</li>

							<li class="m-item">
								<!-- <a class="m-link" href="/data-science-academy/">Data Science Academy</a> -->
								<a class="m-link" href="#">Data Science Academy</a>
								<ul class="m-dropdown">


									<li class="m-dropdown-item"><a class="m-dropdown-link" href="/our-team/">Our team</a></li>
									<li class="m-dropdown-item"><a class="m-dropdown-link" href="/our-team/#opportunities">Opportunities</a></li>

									<hr>

									<li class="m-dropdown-item"><a class="m-dropdown-link" href="/code/">R and Python code</a></li>
									<li class="m-dropdown-item"><a class="m-dropdown-link" href="/courses/">Data science courses</a></li>

									<hr>

									<li class="m-dropdown-item"><a class="m-dropdown-link" href="/bio-oracle-climate-layers-ecological-distribution-modelling/">Climate data</a></li>
									<li class="m-dropdown-item"><a class="m-dropdown-link" href="/biodiversity-data/">Biodiversity data</a></li>
									<li class="m-dropdown-item"><a class="m-dropdown-link" href="/biodiversity-data/">Connectivity data</a></li>




								</ul>
							</li>
						</ul>

						<!-- Close Button -->
						<button class="close-button">
							<span></span>
						</button>
					</div>

					<!-- Menu Toggle on Mobile -->
					<button class="m-toggle">
						<span></span>
					</button>

				</div>
			</div>

			<!-- end Header -->


<div class="section">

  	<div class="container">
		<div class="row margin-top-40">
			<div class="col-10 col-lg-10 col-xl-10 offset-lg-1 text-left">

        <h3>Downloading biodiversity records from iNaturalist</h3>

        <div class="margin-top-10">
          <p class="font-family-secondary text-dark">Automatically download biodiversity records from iNaturalist, the most recognised citizen science initiative.</p>
        </div>

        <div class="margin-bottom-10">

         

          
          
			  	<a href="/tag/code"><span style="margin-right: 7px" class="button button-xs button-font-2 button-yellow button-radius mt-4">code</span></a>
			    
          
          
          

        </div>

			</div>
		</div>

		<div class="row" style="margin-top: 30px">
			<div class="col-12 col-lg-10 offset-lg-1">

          <div class="bg-image box-shadow border-radius-05 margin-bottom-10" data-bg-src="/assets/images/posts/unamed-unsplash.webp" style="height: 425px; background-position: center"></div>

          <div class="margin-top-20">

            

            

            

          </div>

        </div>
      </div>

      <div class="row" style="margin-top: 25px">
			  <div class="col-12 col-lg-10 offset-lg-1 post-content text-justify">
          
          <p>iNaturalist is a global platform where naturalists, citizen scientists, and biologists post their observations with photographs. Observations can be curated by the network of users to provide valuable open data to scientific research projects, conservation agencies and the general public. In particular, the data has been used to describe the global distribution of species, address niche-based questions, support biodiversity and ecosystem-based conservation, and to understand correlations between anthropogenic pressures and population extinctions.</p>

<p>Data may be accessed via its website, mobile application or API. Here I provide some line of python code to automatically download multiple records from iNaturalist using the API. In this particular case, the code will get all data for the Parque Marinho Luiz Saldanha, a Marine Protected Area located in Portugal.</p>

<div style="padding: 20px" class="border-radius-05 bg-gray font-family-secondary font-small text-dark">

# import dependencies<br />
from requests import request<br />
import json<br />
from pandas.io.json import json_normalize<br />
import pandas as pd<br />
import urllib.request<br />
import os<br /><br />

# Get all records for Parque Marinho Luiz Saldanha<br />
outputFolder = '/theFolderToSaveData'<br />
placeID = '128892'<br />
if not os.path.exists(outputFolder):<br />
    os.makedirs(outputFolder)<br />
df = pd.DataFrame([])<br />
iteraction = 0<br />
dataSize = 1<br />
while (dataSize &gt; 0):<br />
    iteraction = iteraction + 1<br />
    url = 'https://api.inaturalist.org/v1/<br />
    observations?geo=true&amp;identified=true&amp;place_id='+placeID+'&amp;rank=species&amp;<br />
    order=desc&amp;order_by=created_at&amp;page='+str(iteraction)+'&amp;per_page=200'<br />
    response = requests.get(url)<br />
    dictr = response.json()<br />
    recs = dictr['results']<br />
    dataSize = len(recs)<br />
    data = json_normalize(recs)<br />
    if dataSize &gt; 0:<br />
        df = df.append(data)<br /><br />

# Save images to the folder<br />
for x in range(0, len(df)):<br />
    id = df['id'].values[x]<br />
    imageURL = json_normalize(df['photos'].values[x])['url'].values[0]<br />
    imageURLM = imageURL.replace("square", "medium")<br />
    imageURLO = imageURL.replace("square", "original")<br />
    urllib.request.urlretrieve(imageURL, outputFolder+'/'+str(id)+'Sq.jpg')<br />
    urllib.request.urlretrieve(imageURLM, outputFolder+'/'+str(id)+'M.jpg')<br />
    urllib.request.urlretrieve(imageURLO, outputFolder+'/'+str(id)+'O.jpg')<br /><br />

# Prepare pandas data.frame and export to csv<br />
list(df.columns)<br />
dfLatitude = df["location"].str.split(",", expand = True)[0]<br />
dfLongitude= df["location"].str.split(",", expand = True)[1]<br />
df1 = df[['id','taxon.name', 'quality_grade', 'time_observed_at', 'species_guess', 'license_code', 'observed_on', <br /> 'community_taxon_id']]<br />
df1 = pd.concat([df1, dfLongitude, dfLatitude], axis=1)<br />
df1.columns = ['id','taxon.name', 'quality_grade', 'time_observed_at', 'species_guess', 'license_code', 'observed_on', <br /> 'community_taxon_id','Longitude','Latitude']<br />
df1.to_csv(outputFolder+'/dataFrame.csv', sep='\t', header=True)
</div>


        </div>
      </div>

      
      
      <div class="row" style="margin-top: 35px">
          <div style="padding: 30px; padding-bottom: 15px;" class="col-12 col-lg-10 offset-lg-1 border-radius-10 bg-light-purple">
            
              <h3>Main reference</h3>
              <p></p>

            

            

          </div>
      </div>

      


    
    

    

</div>



	<!-- Google Analytics -->
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-4HVK8ZJMY6"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'G-4HVK8ZJMY6');
	</script>
	<!-- End Google Analytics -->


	<!-- Footer -->
	<div class="section" style="margin-top: -60px">

		<div class="container">
			<div class="row">
				<div class="col-12 col-lg-12 col-xl-12 text-center">

					<hr>
					
				</div>
			</div>

			<div class="row margin-top-40">
				<div class="col-3">

					<h5>biodiversityDS<span style="color: #A22A2A">.</span></h5>
					Centre of Marine Sciences<br>
					Faro, Portugal
				</div>
				<div class="col-3">

					<h5>Team</h5>
					<a href="/about">About</a><br>
					<a href="/our-team">Who we are</a><br>
					<a href="/our-team#opportunities">Opportunities</a><br>
					</p>

				</div>
				<div class="col-3">

					<p>
					<h5>Outreach</h5>
					<a href="/publications">Publications</a><br>
					<a href="/podcast">Podcast</a><br>
					<a href="/code">R and Python code</a><br>
					<a href="/bio-oracle-climate-layers-ecological-distribution-modelling/">Climate data</a><br>
					<a href="/biodiversity-data">Biodiversity data</a><br>
					</p>
					
				</div>				
				<div class="col-3">

					<h5>Connect with us</h5>			
					<a href="/contact">Send an email</a><br>
					<a href="https://bsky.app/profile/biodiversityds.bsky.social" target="_blank">Follow on Bluesky</a><br>
					<a href="https://x.com/jorgemfassis" target="_blank">Follow on X</a>

					

					</p>

				</div>

			</div>
		</div>

	</div>

<!-- end wrapper of header -->

<div class="scrolltotop">
  <a class="button-circle button-circle-md button-circle-dark" href="#">
    <i class="fa fa-angle-up"></i>
  </a>
</div>

<!-- JAVASCRIPTS -->
<script src="/assets/plugins/jquery.min.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=IntersectionObserver"></script>
<script src="/assets/plugins/plugins.js"></script>
<script src="/assets/js/functions.js"></script>
</body>
</html>

