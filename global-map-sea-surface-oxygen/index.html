<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<meta name="google-site-verification" content="bk_G_7OoYI8N9v856DPvFsz4-FtC0ahvjuZJXRyYHnU" />

		<!-- SEO -->

		
			<title>Biodiversity Data Science | Producing a global map of Sea Surface Oxygen</title>
			<meta property="og:title" content="Biodiversity Data Science | Producing a global map of Sea Surface Oxygen" />
			<meta property="og:site_name" content="Biodiversity Data Science | Producing a global map of Sea Surface Oxygen" />
			<meta property="twitter:title" content="Biodiversity Data Science | Producing a global map of Sea Surface Oxygen" />

		

		

			<meta name="description" content="We propose a simple implementation to produce a beautiful map of global Sea Surface Oxygen.">
			<meta property="og:description" content="We propose a simple implementation to produce a beautiful map of global Sea Surface Oxygen." />
			<meta name="twitter:card" content="We propose a simple implementation to produce a beautiful map of global Sea Surface Oxygen." />

		

		<meta name="keywords" content="Biodiversity Data Science, Conservation Data Analysis, UN 2030 Sustainable Development, Marine Biodiversity Conservation, Environmental Data Science">
		<meta name="author" content="Jorge Assis">

		<meta name="generator" content="Jekyll v4.3.3" />
		<meta property="og:locale" content="en_US" />

		<meta property="og:type" content="https://www.biodiversitydatascience.com" />

		<!-- End SEO -->

		<!-- Favicon -->
    	<link href="/assets/images/bears.png" rel="shortcut icon">

		<!-- CSS -->
		<link href="/assets/plugins/bootstrap/bootstrap.min.css" rel="stylesheet">
		<link href="/assets/plugins/magnific-popup/magnific-popup.min.css" rel="stylesheet">
		<link href="/assets/plugins/owl-carousel/owl.carousel.min.css" rel="stylesheet">
		<link href="/assets/plugins/owl-carousel/owl.theme.default.min.css" rel="stylesheet">
		<link href="/assets/plugins/justified-gallery/justified-gallery.min.css" rel="stylesheet">
		<link href="/assets/plugins/sal/sal.min.css" rel="stylesheet">
		<link href="/assets/css/main.css" rel="stylesheet">

		<!-- Fonts/Icons -->
		<link href="/assets/plugins/font-awesome/css/all.css" rel="stylesheet">
		<link href="/assets/plugins/themify/themify-icons.min.css" rel="stylesheet">
		<link href="/assets/plugins/simple-line-icons/css/simple-line-icons.css" rel="stylesheet">


</head>


	<body data-preloader="4">
		<div class="wrapper">

			<!-- Header // sticky -->

			

			<div class="header">

				<div class="container margin-top-10">

					<div class="logo">
						<h4><a href="/">biodiversityDS</a><span style="color: #A22A2A">.</span></h4>
					</div>

					<div class="header-menu-wrapper">
						<ul class="header-menu">
							<li class="m-item">
								<a class="m-link" href="/about/">About</a>
							</li>
							<li class="m-item">
								<a class="m-link" href="/projects/">Projects</a>
							</li>

							<li class="m-item">
								<a class="m-link" href="/publications/">Publications</a>
							</li>

							<li class="m-item">
								<a class="m-link" href="/podcast/" >Podcast</a>
							</li>

							<li class="m-item">
								<!-- <a class="m-link" href="/data-science-academy/">Data Science Academy</a> -->
								<a class="m-link" href="#">Data Science Academy</a>
								<ul class="m-dropdown">


									<li class="m-dropdown-item"><a class="m-dropdown-link" href="/our-team/">Our team</a></li>
									<li class="m-dropdown-item"><a class="m-dropdown-link" href="/our-team/#opportunities">Opportunities</a></li>

									<hr>

									<li class="m-dropdown-item"><a class="m-dropdown-link" href="/code/">R and Python code</a></li>
									<li class="m-dropdown-item"><a class="m-dropdown-link" href="/courses/">Data science courses</a></li>

									<hr>

									<li class="m-dropdown-item"><a class="m-dropdown-link" href="/bio-oracle-climate-layers-ecological-distribution-modelling/">Climate data</a></li>
									<li class="m-dropdown-item"><a class="m-dropdown-link" href="/biodiversity-data/">Biodiversity data</a></li>
									<li class="m-dropdown-item"><a class="m-dropdown-link" href="/biodiversity-data/">Connectivity data</a></li>




								</ul>
							</li>
						</ul>

						<!-- Close Button -->
						<button class="close-button">
							<span></span>
						</button>
					</div>

					<!-- Menu Toggle on Mobile -->
					<button class="m-toggle">
						<span></span>
					</button>

				</div>
			</div>

			<!-- end Header -->


<div class="section">

  	<div class="container">
		<div class="row margin-top-40">
			<div class="col-10 col-lg-10 col-xl-10 offset-lg-1 text-left">

        <h3>Producing a global map of Sea Surface Oxygen</h3>

        <div class="margin-top-10">
          <p class="font-family-secondary text-dark">We propose a simple implementation to produce a beautiful map of global Sea Surface Oxygen.</p>
        </div>

        <div class="margin-bottom-10">

         

          
          
			  	<a href="/tag/code"><span style="margin-right: 7px" class="button button-xs button-font-2 button-yellow button-radius mt-4">code</span></a>
			    
          
          
          

        </div>

			</div>
		</div>

		<div class="row" style="margin-top: 30px">
			<div class="col-12 col-lg-10 offset-lg-1">

          <div class="bg-image box-shadow border-radius-05 margin-bottom-10" data-bg-src="/assets/images/posts/C2_2.webp" style="height: 425px; background-position: center"></div>

          <div class="margin-top-20">

            

            

            

          </div>

        </div>
      </div>

      <div class="row" style="margin-top: 25px">
			  <div class="col-12 col-lg-10 offset-lg-1 post-content text-justify">
          
          <p>Plotting spatial data is a common task in research, but this requires a set of technical / design tools that are not always available to all. Here we provide step-by-step instructions for creating a map representing global sea surface oxygen.</p>

<p>The code provided can be used to map additional spatial information in the same raster format. The Robinson projection used is a good compromise for the problem of representing the entire globe as a flat image.</p>

<p>First, you need a shapefile defining global landmasses and a raster file containing the oxygen conditions. These are available at:</p>

<p><a target="_blank" href="https://github.com/jorgeassis/dataVisualization/tree/master/Projects/seaSurfaceOxygen/Data">https://github.com/jorgeassis/dataVisualization/tree/master/Projects/seaSurfaceOxygen/Data</a></p>

<div style="padding: 20px" class="border-radius-05 bg-gray font-family-secondary font-small text-dark">

# Set the working directory in R and load the packages.<br />
setwd("Projects/seaSurfaceOxygen")<br />
library(ggplot2)<br />
library(raster)<br />
library(rnaturalearth)<br />
library(sf)<br />
library(geosphere)<br />
library(rgeos)<br /><br />

# Choose the projection and load the spatial data.<br />
The Robinson projection is a projection of the world that attempts to find a good compromise of showing the whole globe as a flat image.<br />
projection &lt;- CRS("+proj=robin +over")<br />
oxygenLayer &lt;- raster("Data/DissolvedMolecularOxygen.tif")<br />
worldMap &lt;- shapefile("Data/LandMass Polygon.shp")<br /><br />

# Generate a bounding box and clip spatial data.<br />
bb &lt;- sf::st_union(sf::st_make_grid(
  st_bbox(c(xmin = -180,
            xmax = 180,
            ymax = 90,
            ymin = -90), crs = st_crs(4326)), n = 100))<br />
bb &lt;- st_transform(bb, projection)<br />
oxygenLayer &lt;- projectRaster(oxygenLayer, crs = projection)<br />
oxygenLayer &lt;- mask(oxygenLayer, as(bb, "Spatial"))<br />
oxygenLayer &lt;- as.data.frame(oxygenLayer,xy=TRUE,na.rm=T)<br />
colnames(oxygenLayer) &lt;- c("Lon","Lat","Val")<br />
worldMap &lt;- spTransform(worldMap, CRSobj = projection)<br />
worldMap &lt;- gBuffer(worldMap, byid=TRUE, width=0.001)<br />
worldMap &lt;- crop(worldMap, as(bb, "Spatial"))<br /><br />

# 5. Define the theme for the final plot.<br />
theme_map &lt;-
  theme(
    text = element_text(family = "Helvetica", color = "#22211d"),
    axis.text.x = element_blank(),
    axis.text.y = element_blank(),
    axis.ticks = element_blank(),
    axis.title.x = element_blank(),
    axis.title.y = element_blank(),
    panel.grid.major = element_line(color = "black", size = 0.1),
    panel.grid.minor = element_blank(),
    plot.background = element_rect(fill = "#FFFFFF", color = NA),
    panel.background = element_rect(fill = "#FFFFFF", color = NA),
    panel.border = element_blank(),
    legend.background = element_rect(fill = "#FFFFFF", color = NA),
    legend.position="bottom",
    legend.box = "horizontal",
    legend.margin=margin(0,0,0,0),
    legend.box.margin=margin(-10,-10,-10,-10),
    legend.key.height= unit(0.25, 'cm'),
    legend.key.width= unit(0.75, 'cm') )<br /><br />

# Define a color ramp for the oxygen gradient and plot the map.<br />
myColors &lt;- c("#6FBBE8","#A1ECD8","#F6F9AB","#FCB46D","#B21414","#D278E4","#9914B3")<br />
plot &lt;- ggplot() +
  geom_tile(data = oxygenLayer, aes(x=Lon,y=Lat,fill=Val)) +
  scale_fill_gradientn(guide = guide_legend(title="Sea surface dissolved oxygen [mmol.m3]", direction = "horizontal", title.position = "top", title.hjust = 0.5), colours=myColors, na.value='transparent') +
  geom_polygon(data = worldMap, aes(x = long, y = lat, group = group), fill="#A1A1A1", colour = "#A1A1A1" , size=0.25 ) +
  geom_sf(data = bb,fill=NA, colour = "white" , linetype='solid', size=2 ) +
  theme_map<br /><br />
plot

</div>


        </div>
      </div>

      
      
      <div class="row" style="margin-top: 35px">
          <div style="padding: 30px; padding-bottom: 15px;" class="col-12 col-lg-10 offset-lg-1 border-radius-10 bg-light-purple">
            
              <h3>Main reference</h3>
              <p>Assis, J., Tyberghein, L., Bosch, S., Verbruggen, H., Serrão, E. A., and De Clerck, O. (2017). Bio-ORACLE v2.0: Extending marine data layers for bioclimatic modelling. Global Ecology and Biogeography. 27, 277–284.</p>

            

            

          </div>
      </div>

      


    
    

    

</div>



	<!-- Google Analytics -->
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-4HVK8ZJMY6"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'G-4HVK8ZJMY6');
	</script>
	<!-- End Google Analytics -->


	<!-- Footer -->
	<div class="section" style="margin-top: -60px">

		<div class="container">
			<div class="row">
				<div class="col-12 col-lg-12 col-xl-12 text-center">

					<hr>
					
				</div>
			</div>

			<div class="row margin-top-40">
				<div class="col-3">

					<h5>biodiversityDS<span style="color: #A22A2A">.</span></h5>
					Centre of Marine Sciences<br>
					Faro, Portugal
				</div>
				<div class="col-3">

					<h5>Team</h5>
					<a href="/about">About</a><br>
					<a href="/our-team">Who we are</a><br>
					<a href="/our-team#opportunities">Opportunities</a><br>
					</p>

				</div>
				<div class="col-3">

					<p>
					<h5>Outreach</h5>
					<a href="/publications">Publications</a><br>
					<a href="/podcast">Podcast</a><br>
					<a href="/code">R and Python code</a><br>
					<a href="/bio-oracle-climate-layers-ecological-distribution-modelling/">Climate data</a><br>
					<a href="/biodiversity-data">Biodiversity data</a><br>
					</p>
					
				</div>				
				<div class="col-3">

					<h5>Connect with us</h5>			
					<a href="/contact">Send an email</a><br>
					<a href="https://bsky.app/profile/biodiversityds.bsky.social" target="_blank">Follow on Bluesky</a><br>
					<a href="https://x.com/jorgemfassis" target="_blank">Follow on X</a>

					

					</p>

				</div>

			</div>
		</div>

	</div>

<!-- end wrapper of header -->

<div class="scrolltotop">
  <a class="button-circle button-circle-md button-circle-dark" href="#">
    <i class="fa fa-angle-up"></i>
  </a>
</div>

<!-- JAVASCRIPTS -->
<script src="/assets/plugins/jquery.min.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=IntersectionObserver"></script>
<script src="/assets/plugins/plugins.js"></script>
<script src="/assets/js/functions.js"></script>
</body>
</html>

